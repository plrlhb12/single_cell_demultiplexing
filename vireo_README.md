# run cellsnp and vireo together
## cellsnp can be done about 8-10 hours, while vireo takes faster
## cellsnp usuallly takes less than 20g mem and the running time varies, may be longger than 24 h if -p=20 (i.e., cpu 20); ; while vireo takes more memory, 
1. each sample folder has one copy of cellsnp.sh file, although the content is the same. don't change the location of sh file becasue it has a relative path inside its script: "cd cellSNP/".

2. each sample folder has the same structure: 

- SAMPLE/cellSNP/
- SAMPLE/ceellsnp.sh

cellSNP_out and vireo_out are automatically generated by scripts

├── cellSNP
│   ├── barcodes.tsv.gz
│   ├── cellSNP_out
│   │   ├── cellSNP.base.vcf.gz
│   │   ├── cellSNP.cells.vcf.gz
│   │   ├── cellSNP.samples.tsv
│   │   ├── cellSNP.tag.AD.mtx
│   │   ├── cellSNP.tag.DP.mtx
│   │   └── cellSNP.tag.OTH.mtx
│   ├── genome1K.phase3.SNP_AF5e2.chr1toX.hg38.vcf.gz
│   ├── possorted_genome_bam.bam
│   ├── possorted_genome_bam.bam.bai
│   ├── UNHS_to_use_7s.vcf.gz
│   └── vireo_out
│       ├── donor_ids.tsv
│       ├── fig_GT_distance_estimated.pdf
│       ├── _log.txt
│       ├── prob_doublet.tsv.gz
│       ├── prob_singlet.tsv.gz
│       └── summary.tsv
└── cellsnp.sh

```
swarm -f cellsnp.swarm -g 120 -t 48 --time 24:00:00 --module cellsnp/0.1.7.lua,vireosnp/0.3.2.lua --devel
```
## the following is the content inside the cellsnp.swarm script
```
#!/bin/bash/

cd /data/CARD/projects/iNDI/Pool1_hNGN2; bash cellsnp.sh
cd /data/CARD/projects/iNDI/Pool2_hNGN2; bash cellsnp.sh
cd /data/CARD/projects/iNDI/Pool1_forebrain; bash cellsnp.sh
cd /data/CARD/projects/iNDI/Pool2_forebrain; bash cellsnp.sh
cd /data/CARD/projects/iNDI/Combined1_forebrain; bash cellsnp.sh
cd /data/CARD/projects/iNDI/Combined2_forebrain; bash cellsnp.sh

```




